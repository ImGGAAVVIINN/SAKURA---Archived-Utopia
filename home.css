@font-face {
    font-family: 'Frutiger';
    src: url('fonts/frutiger/Frutiger.ttf') format('truetype');
}

.intro,
.sticky-cols,
.outro {
    font-family: 'Frutiger', sans-serif;
}

/* Background video styles for theKey.mp4 — positioned fixed so it covers the
   viewport and is allowed to "bleed" slightly into the intro/outro sections */
.bg-key-wrap {
    /* Scoped to the sticky section: absolutely positioned within
       .sticky-cols-wrapper so it doesn't cover the whole page. */
    position: absolute;
    top: -12vh; /* increase bleed so a little bit shows into intro/outro */
    /* extend horizontally past the sticky section padding so the video
       fills the full width without visible gaps */
    left: -0.5rem;
    right: -0.5rem;
    bottom: -12vh;
    z-index: 0;
    pointer-events: none;
    overflow: visible; /* allow the visible bleed to escape its box */
}
.bg-key {
    --bleed-fade: 8vh; /* how much of the top/bottom edge should fade; match intro fade */
    width: 100%;
    height: 100%;
    position: absolute;
    inset: 0;
    object-fit: cover;
    display: block;
    transform: translateZ(0);
    /* No darkening; use the raw video as requested */
    opacity: 1;
    /* Fade the video out near the top and bottom so it bleeds softly into
       the intro/outro sections. Use mask-image with a gradient and include
       -webkit- prefix for Safari support. */
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0px, rgba(0,0,0,1) var(--bleed-fade), rgba(0,0,0,1) calc(100% - var(--bleed-fade)), rgba(0,0,0,0) 100%);
    mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0px, rgba(0,0,0,1) var(--bleed-fade), rgba(0,0,0,1) calc(100% - var(--bleed-fade)), rgba(0,0,0,0) 100%);
    -webkit-mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-size: 100% 100%;
    mask-repeat: no-repeat;
}

/* Fallback style when the video resource is missing/unavailable */

/* Fallback when resource missing — scoped to the sticky section */
.sticky-cols.bg-key-missing .bg-key-wrap {
    background: linear-gradient(180deg,#0b1220,#1a2433);
}

/* Ensure sticky section content sits above the video */
.sticky-cols .col {
    z-index: 3; /* keep columns above the bg video and intro */
}
.sticky-cols .col-content,
.sticky-cols .col-img {
    z-index: 2;
    position: relative; /* ensure z-index creates stacking context for inner elements */
}

/* Allow sticky section to show the video bleed outside its own bounds */
.sticky-cols {
    overflow: visible;
}

/* Intro background: use tmp.png and blend it with the video that bleeds up
   from the sticky section. The intro image fades at its bottom edge so the
   video's fade beneath it blends smoothly. */
.intro {
    position: relative;
    z-index: 2; /* sit above the video but below sticky columns */
    overflow: visible;
}
.intro::before {
    content: '';
    position: absolute;
    inset: 0;
    /* correct path to the asset in images/ */
    background: center / cover no-repeat url('images/screenshot.png');
    mix-blend-mode: overlay; /* blend with the video beneath */
    opacity: 0.98;
    pointer-events: none;
    z-index: 0;
    /* fade out at bottom so the video bleed shows through smoothly */
    --intro-fade: 8vh;
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0, rgba(0,0,0,1) calc(100% - var(--intro-fade)), rgba(0,0,0,0) 100%);
    mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0, rgba(0,0,0,1) calc(100% - var(--intro-fade)), rgba(0,0,0,0) 100%);
}

/* ensure intro content sits above its background pseudo-element */
.intro > * {
    position: relative;
    z-index: 1;
}

/* Avoid autoplay heavy video on small screens — hide video under a small viewport */
@media (max-width: 700px) {
    .bg-key-wrap { display: none; }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* prevent horizontal scrolling caused by elements sized with 100vw or
   absolute children pushed outside the viewport */
html, body {
    overflow-x: hidden;
}

section {
    position: relative;
    /* avoid 100vw which can exceed the viewport when a vertical scrollbar
       is present; use 100% to match the parent's width */
    width: 100%;
    height: 100svh;
    overflow: hidden;
}

h1 {
    font-size: 2.5rem;
    font-weight: 500;
    line-height: 1.1;
}

p {
    font-size: 1rem;
    font-weight: 500;
}

img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.intro,
.outro {
    display: flex;
    justify-content: center;
    align-items: center;
}

.intro h1,
.outro h1 {
    width: 50%;
    text-align: center;
}

.sticky-cols {
    padding: 0.5rem;
}

.sticky-cols-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
}

.col {
    position: absolute;
    width: 50%;
    height: 100%;
    will-change: transform;
}

.col h2 {
    color: cyan;
    width: 60%;
}

.col p {
    color: red;
    width: 60%;
}

.col-2 {
    transform: translateX(100%);
}

.col-3 {
    transform: translateX(100%) translateY(100%);
    padding: 0.5rem;
}

.col-4 {
    transform: translateX(100%) translateY(100%);
}

.col-content, .col-img {
    position: relative;
    width: 100%;
    height: 100%;
    padding: 0.5rem;
}

.col-content-wrapper, .col-img-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    /* make the img wrapper transparent so when one image is clipped the
       other can show through without revealing a placeholder color */
    background-color: transparent;
    border-radius: 3rem;
    overflow: hidden;
}

/* When the background video is present (scoped to .sticky-cols), make the
   "cards" slightly translucent so the video can be seen through them. */
.sticky-cols.has-bg-key .col-content-wrapper {
    background-color: transparent; /* allow liquid glass effect to show through */
}
.sticky-cols.has-bg-key .col-img-wrapper {
    background-color: inherit; /* restore default */
}

.col-content-wrapper {
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* ===== Liquid Glass Effect ===== */
.col-content-wrapper.liquid-glass,
.col-content-wrapper-2.liquid-glass {
    --border-radius: 3rem;
    background-color: transparent !important;
}

.liquid-glass--bend {
    backdrop-filter: blur(12px);
    border-radius: var(--border-radius, 3rem);
    filter: url(#glass-blur);
    inset: 0;
    position: absolute;
    z-index: 0;
}

.liquid-glass--face {
    border-radius: var(--border-radius, 3rem);
    box-shadow: 0 4px 4px rgba(0, 0, 0, 0.15), 0 0 12px rgba(0, 0, 0, 0.08);
    background: rgba(255, 183, 197, 0.2);
    inset: 0;
    position: absolute;
    z-index: 1;
}

.liquid-glass--edge {
    border-radius: var(--border-radius, 3rem);
    box-shadow: inset 3px 3px 3px 0 rgba(255, 255, 255, 0.45),
        inset -3px -3px 3px 0 rgba(255, 255, 255, 0.45);
    inset: 0;
    position: absolute;
    z-index: 2;
}

/* Ensure content inside liquid glass sits above the glass layers */
.col-content-wrapper.liquid-glass > *:not(.liquid-glass--bend):not(.liquid-glass--face):not(.liquid-glass--edge) {
    position: relative;
    z-index: 3;
}

.col-content-wrapper-2 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* Liquid glass for col-content-wrapper-2 */
.col-content-wrapper-2.liquid-glass {
    --border-radius: 3rem;
    background-color: transparent;
}

.col-content-wrapper-2.liquid-glass > *:not(.liquid-glass--bend):not(.liquid-glass--face):not(.liquid-glass--edge) {
    position: relative;
    z-index: 3;
}

.col-img-1, 
.col-img-2 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.col-img-2 {
    clip-path: polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%);
}

/* Ensure the first image has an explicit open clip-path so we can animate
   between the two images reliably via GSAP (avoid relying on implicit state). */
.col-img-1 {
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
}

.col-img-2 img {
    transform: scale(1.25);
}

/* Layering: keep the second image above the first when revealed so it isn't
   accidentally occluded by other elements. */
.col-img-1 { z-index: 1; }
.col-img-2 { z-index: 2; }

/* Start the second image hidden by opacity as well as clip-path so we can
   animate both properties for a smooth reveal. */
.col-img-2 {
    opacity: 0;
}

.line {
    overflow: hidden;
}

.line span {
    display: block;
    will-change: transform;
}

@media (max-width: 1000px) {
    h1 {
        font-size: 1.25rem;
    }

    p {
        font-size: 0.85rem;
    }

    .col h1,
    .col p {
        width: 100%;
    }

    .col-content-wrapper, 
    .col-content-wrapper-2 {
        padding: 2rem;
    }
}